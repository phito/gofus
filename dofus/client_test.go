package dofus

import (
	"testing"
)

func TestFind1(t *testing.T) {
	data := []byte{0x49, 0xa0, 0x2c, 0x8f, 0xe7, 0x02, 0xa0, 0x4a, 0x9f, 0xe7, 0x01, 0x01, 0x80, 0x9f, 0xe7, 0x01, 0x6d, 0x03, 0x65, 0x01, 0x6c, 0x03, 0x66, 0xe1, 0xe1, 0x01, 0x11, 0x40, 0x00, 0x00, 0x65, 0x01, 0x5d, 0xf6, 0xc2, 0x02, 0x4a, 0xf6, 0xc2, 0x02}
	fingerprint := []byte{0xe7, 0x01, 0x01, 0x80, 0x9f, 0xe7, 0x01}
	i, err := find(data, fingerprint)

	if err != nil {
		t.Error("Fingerprint not found")
	}

	if i != 9 {
		t.Error("Expected 9, got ", i)
	}
}

func TestFind2(t *testing.T) {
	data := []byte{0x49, 0xa0, 0x2c, 0x8f, 0xe7, 0x02, 0xa0, 0x4a, 0x9f, 0xe7, 0x01, 0x01, 0x80, 0x9f, 0xe7, 0x01, 0x6d, 0x03, 0x65, 0x01, 0x6c, 0x03, 0x66, 0xe1, 0xe1, 0x01, 0x11, 0x40, 0x00, 0x00, 0x65, 0x01, 0x5d, 0xf6, 0xc2, 0x02, 0x4a, 0xf6, 0xc2, 0x02}
	fingerprint := []byte{0xe7, 0x01, 0x01, 0x80, 0x9f, 0xe7, 0x02}

	_, err := find(data, fingerprint)
	if err == nil {
		t.Error("Expected error, got none")
	}
}
